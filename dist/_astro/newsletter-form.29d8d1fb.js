import{j as e}from"./utils.f2607796.js";import{T as I,z as b,u as T,F as z,a as y,b as $,c as N,I as L,B as J,E as k,d as S,C as M,e as B,t as A,f as O,J as v}from"./checkbox.3bb28258.js";import{r as u}from"./index.6e000db3.js";import{c as R}from"./createLucideIcon.2771e509.js";import"./index.5ad558da.js";const V=R("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var E=["light","dark"],q="(prefers-color-scheme: dark)",U=u.createContext(void 0),_={setTheme:t=>{},themes:[]},D=()=>{var t;return(t=u.useContext(U))!=null?t:_};u.memo(({forcedTheme:t,storageKey:o,attribute:m,enableSystem:a,enableColorScheme:h,defaultTheme:n,value:r,attrs:s,nonce:p})=>{let c=n==="system",x=m==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(i=>`'${i}'`).join(",")})`};`:`var d=document.documentElement,n='${m}',s='setAttribute';`,j=h?E.includes(n)&&n?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${n}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",l=(i,g=!1,C=!0)=>{let f=r?r[i]:i,w=g?i+"|| ''":`'${f}'`,d="";return h&&C&&!g&&E.includes(i)&&(d+=`d.style.colorScheme = '${i}';`),m==="class"?g||f?d+=`c.add(${w})`:d+="null":f&&(d+=`d[s](n,${w})`),d},F=t?`!function(){${x}${l(t)}}()`:a?`!function(){try{${x}var e=localStorage.getItem('${o}');if('system'===e||(!e&&${c})){var t='${q}',m=window.matchMedia(t);if(m.media!==t||m.matches){${l("dark")}}else{${l("light")}}}else if(e){${r?`var x=${JSON.stringify(r)};`:""}${l(r?"x[e]":"e",!0)}}${c?"":"else{"+l(n,!1,!1)+"}"}${j}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${o}');if(e){${r?`var x=${JSON.stringify(r)};`:""}${l(r?"x[e]":"e",!0)}}else{${l(n,!1,!1)};}${j}}catch(t){}}();`;return u.createElement("script",{nonce:p,dangerouslySetInnerHTML:{__html:F}})});const H=({...t})=>{const{theme:o="system"}=D();return e.jsx(I,{theme:o,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},X=()=>{const[t,o]=u.useState(!1),m=b.object({email:b.string().email("Veuillez entrer une adresse e-mail valide."),terms:b.boolean().refine(s=>s===!0,{message:"Vous devez accepter les conditions d'utilisation pour vous inscrire à la newsletter."})}),a=T({resolver:A(m),defaultValues:{email:"",terms:!1}});function h(s){o(!0);const p="https://www.reservation-back.amandine-nails.fr/wp-json/custom-newsletter-subs/v1/submit";try{O.post(p,{email:s.email}).then(c=>{v.success("Merci de vous être inscrit à notre newsletter !"),a.reset()}).catch(c=>{c.response.data.message==="Cet e-mail est déjà enregistré."?v.error("Cet e-mail est déjà enregistré."):v.error("Une erreur s'est produite lors de l'inscription à la newsletter, veuillez réessayer plus tard.")}).finally(()=>{o(!1)})}catch{o(!1)}}const n=a.formState.errors.email,r=a.formState.errors.terms;return e.jsx(z,{...a,children:e.jsxs("form",{className:"max-w-sm mx-auto pt-4 pb-12",onSubmit:a.handleSubmit(h),children:[e.jsx(H,{}),e.jsxs("div",{className:"relative mt-6 ",children:[e.jsx(y,{control:a.control,name:"email",render:({field:s})=>e.jsxs($,{className:"w-full text-left",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-end gap-2 w-full relative",children:[e.jsx(L,{type:"email",placeholder:"Email",...s,className:`\r
                          ring-offset-none ring-offset-none focus-visible:ring-none\r
                          block w-full h-[40px] rounded-2xl bg-background py-4 pl-6 pr-20 text-base/6 text-accent-foreground ring-4 ring-transparent transition placeholder:text-neutral-500 focus:border-background focus:outline-none focus:ring-muted`}),e.jsx("div",{className:"absolute inset-y-1 right-1 flex justify-end",children:e.jsx(J,{disabled:t,type:"submit",className:" aspect-square h-full items-center justify-center rounded-xl bg-primary/80 text-muted  hover:bg-primary group/button relative inline-flex  w-7 overflow-hidden  font-medium text-white transition-all duration-300 hover:w-24",variant:"default",children:t?e.jsx("p",{children:"..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-flex whitespace-nowrap text-xs opacity-0 transition-all duration-200 group-hover/button:-translate-x-2.5 group-hover/button:opacity-100",children:"Je m'inscris"}),e.jsx(V,{className:"w-4 absolute right-1.5"})]})})})]})}),n&&e.jsxs("div",{className:"text-destructive bg-background p-2 rounded-md flex items-center gap-2",children:[e.jsx(k,{className:"w-10 h-10"}),e.jsx(S,{})]})]})}),e.jsx(y,{control:a.control,name:"terms",render:({field:s})=>e.jsxs($,{className:"",children:[e.jsxs("div",{className:"mt-3 space-x-3 leading-none",children:[e.jsx(N,{children:e.jsx(M,{className:"rounded-[5px] border-white bg-white",checked:s.value,onCheckedChange:s.onChange})}),e.jsxs(B,{className:"text-white",children:["En vous inscrivant à la newsletter vous acceptez nos ",e.jsx("a",{href:"/",children:"condition d'utilisation."})]})]}),r&&e.jsxs("div",{className:"text-destructive bg-background p-2 rounded-md flex items-center gap-2",children:[e.jsx(k,{className:"min-w-10 h-10"}),e.jsx(S,{})]})]})})]})]})})};export{X as default};
